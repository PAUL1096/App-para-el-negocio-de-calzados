{% extends "base.html" %}

{% block title %}Dashboard - Sistema Calzado{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="bi bi-speedometer2"></i> Dashboard Principal</h1>
    <p class="text-muted">Vista general del sistema de gestión</p>
</div>

<!-- Tarjetas de estadísticas -->
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="card stat-card">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="stat-label">Total Ventas</div>
                    <div class="stat-value">{{ total_ventas }}</div>
                </div>
                <div class="text-primary" style="font-size: 3rem;">
                    <i class="bi bi-receipt"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card stat-card success">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="stat-label">Ingresos Totales</div>
                    <div class="stat-value">${{ "%.2f"|format(ingresos_totales) }}</div>
                </div>
                <div class="text-success" style="font-size: 3rem;">
                    <i class="bi bi-cash-stack"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card stat-card warning">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="stat-label">Stock General</div>
                    <div class="stat-value">{{ stock_general }} <small class="text-muted">pares</small></div>
                </div>
                <div class="text-warning" style="font-size: 3rem;">
                    <i class="bi bi-box-seam"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card stat-card danger">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="stat-label">Stock Pedidos</div>
                    <div class="stat-value">{{ stock_pedidos }} <small class="text-muted">pares</small></div>
                </div>
                <div class="text-danger" style="font-size: 3rem;">
                    <i class="bi bi-clipboard-check"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Accesos rápidos -->
<div class="row g-4 mb-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="bi bi-lightning-fill"></i> Accesos Rápidos</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-3">
                        <a href="/inventario" class="btn btn-outline-primary w-100">
                            <i class="bi bi-box-seam"></i><br>
                            Ver Inventario
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="/variantes" class="btn btn-outline-success w-100">
                            <i class="bi bi-palette"></i><br>
                            Gestionar Variantes
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="/pedidos_cliente" class="btn btn-outline-warning w-100">
                            <i class="bi bi-clipboard-check"></i><br>
                            Pedidos Cliente
                        </a>
                    </div>
                    <div class="col-md-3">
                        <a href="/ubicaciones" class="btn btn-outline-info w-100">
                            <i class="bi bi-geo-alt"></i><br>
                            Ubicaciones
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ventas recientes -->
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0"><i class="bi bi-clock-history"></i> Ventas Recientes</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>ID Venta</th>
                                <th>Fecha</th>
                                <th>Cliente</th>
                                <th>Producto</th>
                                <th>Pares</th>
                                <th>Total</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for venta in ventas_recientes %}
                            <tr>
                                <td><strong>{{ venta.id_venta }}</strong></td>
                                <td>{{ venta.fecha }}</td>
                                <td>{{ venta.cliente }}</td>
                                <td>
                                    <span class="badge bg-secondary">{{ venta.tipo }}</span>
                                    {{ venta.cuero }} - {{ venta.color }}
                                </td>
                                <td>{{ venta.pares }}</td>
                                <td><strong>${{ "%.2f"|format(venta.total_venta) }}</strong></td>
                                <td>
                                    {% if venta.estado_pago == 'pagado' %}
                                        <span class="badge bg-success">Pagado</span>
                                    {% else %}
                                        <span class="badge bg-warning">Pendiente</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
